#  Адресация IPv4: Резюме

<!-- 11.10.3 -->
##  Что я изучил в этом модуле?

**Структура IPv4-адреса**

Адрес IPv4 является иерархическим и состоит из сетевой части и  хостовой части.  Биты в сетевой части адреса должны быть одинаковыми у всех устройств, находящихся в одной сети. Биты в хостовой части адреса должны быть уникальными для каждого хоста в сети. Хосту требуется уникальный адрес IPv4 и маску подсети, чтобы показать части адреса сети/узла. Длина префикса означает количество бит, установленных в единицу (1) в маске подсети. Она обозначается наклонной чертой вправо («/»), после которой идет набор единиц. Логическая операция И — это сравнение двух битов. Только 1 И 1 создает 1, а все остальные комбинации приводят к 0. Любая другая комбинация приводит к 0. В каждой сети есть сетевые адреса, адреса узлов и широковещательный адрес.

**Одноадресная, широковещательная и многоадресная рассылка IPv4**

Одноадресная передача относится к устройству, отправляющему сообщение другому устройству в режиме одной-к-одному. Одноадресный пакет — это пакет с IP-адресом назначения, который является одноадресный адресом, который является адресом одного получателя. Широковещательная рассылка связана с устройством, отправляющее сообщение всем остальным устройствам в сети в режиме «один-ко всем». Пакет широковещательной рассылки содержит IPv4-адрес назначения, в узловой части которого присутствуют только единицы (1). Многоадресная рассылка уменьшает трафик, позволяя узлу отправлять один пакет выбранной группе узлов, которые подписаны на группу многоадресной рассылки. Многоадресный пакет — это пакет с IP-адресом назначения, который является адресом многоадресной рассылки. Для многоадресной рассылки в протоколе IPv4 зарезервированы адреса от 224.0.0.0 до 239.255.255.255.

**Типы адресов IPv4**

Общедоступные адреса IPv4 ― это адреса, маршрутизируемые на глобальном уровне между маршрутизаторами поставщиков услуг Интернета. Однако, не все доступные IPv4-адреса можно использовать в Интернете. Имеются блоки адресов, называемые частными адресами, которые в большинстве компаний назначаются в качестве IPv4-адресов внутренних хостов. Большинство внутренних сетей используют частные IPv4 адреса для адресации всех внутренних устройств (интрасеть); Однако, эти частные адреса не являются глобально маршрутизируемыми. Адреса обратной петли, используемые хостом для направления трафика обратно к себе. Локальные адреса связи чаще называются адресами APIPA или самоназначенными адресами. В 1981 году адреса IPv4 были назначены с использованием классического адреса: A, B или C. Публичные IPv4 адреса должны быть уникальными и глобально маршрутизируться через Интернет. Адреса IPv4 и IPv6 управляются IANA, которая выделяет блоки IP-адресов RIR-ам.

**Сегментация сети**

В локальной сети Ethernet устройства вещают, чтобы найти другие устройства, используя ARP. Коммутаторы выполняют широковещательную рассылку на все интерфейсы, за исключением того интерфейса, через который была получена рассылка. Маршрутизаторы не распространяют широковещательные сообщения, вместо этого каждый интерфейс маршрутизатора соединяет широковещательный домен, а широковещательные сообщения распространяются только в этом конкретном домене. Крупный широковещательный домен представляет собой сеть, соединяющую множество узлов. Проблема крупного широковещательного домена заключается в следующем: узлы могут генерировать избыточную рассылку и негативно влиять на работу сети. Для решения этой проблемы надо сократить размер сети, создав меньшие домены широковещательной рассылки. Такой процесс называется разделением на подсети. Такие более мелкие сети называются подсетями. Разделение на подсети снижает общий объем сетевого трафика и повышает производительность сети. Администратор может разделить сеть на подсети по местоположению, между сетями или по типу устройства.

**Разделение сети IPv4 на подсети**

Для создания IPv4-подсетей мы задействуем один или несколько бит из узловой части в качестве бит сетевой части. Для этого мы расширяем маску подсети. Мы заимствуем биты из узловой части адреса и создаем дополнительные биты для сети. Чем больше заимствовано бит из узловой части, тем больше подсетей можно создать. Чем больше битов, заимствованных для увеличения числа подсетей, также сокращает количество узлов в подсети. Разделение сетей проще всего выполнить на границах октетов /8, /16 и /24. Подсеть может заимствовать биты из любой позиции битов в хостовой части для создания других масок.

**Подсеть /16 и /8**

Если требуется большее количество подсетей, необходимо использовать IPv4-сеть с большим числом бит в узловой части для заимствования. Как и всегда, для создания подсети нужно позаимствовать биты из узловой части адреса исходной сети. Начиная с первого слева доступного бита в узловой части, мы будем заимствовать по одному биту за один раз до тех пор, пока не получим количество бит, необходимых для создания 1000 подсетей. При заимствовании бит из адреса /16 начните заимствовать биты в третьем октете, продолжая слева направо. Первый адрес зарезервирован для сетевого адреса, а последний — для широковещательного адреса.

**Разделение на подсети для соответствия требованиям**

Типичная корпоративная сеть содержит интрасеть и DMZ. Оба имеют требования к подсетям. Интрасеть использует частное пространство адресации IPv4. 10.0.0.0/8 также можно подсеть, используя любое другое количество префиксов, например /12, /18, /20 и т.д., что дает администратору сети много возможностей. Поскольку эти устройства должны быть общедоступными из Интернета, устройства в DMZ требуют общедоступных адресов IPv4. Организации должны максимизировать собственное ограниченное количество публичных адресов IPv4. Чтобы уменьшить количество неиспользуемых адресов узлов в подсети, администратор сети должен разделить на подсети  свою публичную сеть и ее адресное пространства на подсети с различными масками подсетей. Это называется маскировка переменной длины  (VLSM). Администраторы должны учитывать, сколько адресов узлов требуется для каждой сети и сколько подсетей необходимо.

**Маска переменной длины**

Традиционное разделение на подсети может удовлетворить потребности организации в самой большой локальной сети и разделить адресное пространство на достаточное количество подсетей. Но это, вероятно, также приводит к значительной трате неиспользуемых адресов. VLSM позволяет разделить пространство сети на неравные части. VLSM-маска подсети может варьироваться в зависимости от количества бит, которые были заимствованы для конкретной подсети. Эти биты образуют «переменную» часть маски. Разделение подсетей на подсети выполняет маска подсети переменной длины (VLSM). При использовании VLSM, всегда начинайте с обеспечения соответствия требованиям к узлам в крупнейших подсетях. Продолжайте разбиение до тех пор, пока не будут удовлетворены требования к узлам в наименьшей подсети. Разделение на подсети всегда должно запускаться на соответствующей битовой границе.

**Структурированое проектирование**

Администратору сети следует изучить требования к сети, чтобы лучше спланировать структуру  подсетей IPv4. Это означает просмотр всей сети, как интрасети, так и DMZ, и определение того, как каждая область будет сегментирована. План адресов включает определение того, где требуется сохранение адресов (как правило, внутри DMZ) и где есть большая гибкость (как правило, внутри интрасети). Там, где требуется сохранение адресов, план должен определить, сколько подсетей необходимо и сколько узлов в подсети. Обычно это требуется для общего адресного пространства IPv4 в пределах DMZ. Скорее всего, это будет включать использование VLSM. План распределения адресов содержит информацию о требуемом размере подсети, количестве узлов и принципе назначения адресов узлам. Кроме того, необходимо определить узлы, которым нужно выделить статические IPv4-адреса, и узлы, которые смогут получать сетевые настройки по протоколу DHCP. В сети существуют различные типы устройств, для которых требуются адреса: клиенты конечных пользователей, серверы и периферийные устройства, серверы, доступные из Интернета, промежуточные устройства и шлюзы. При проектировании схемы IP-адресации обычно рекомендуется использовать готовый шаблон назначения адресов каждому типу устройств. Это помогает администраторам добавлять и удалять устройства, фильтровать трафик на основе IP-адресов, а также упрощает документирование.

<!-- 11.10.4 -->
<!-- quiz -->

