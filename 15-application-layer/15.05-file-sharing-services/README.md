<!-- verified: agorbachev 03.05.2022 -->

<!-- 15.5.1 -->
## Протокол FTP

Как вы узнали в предыдущих разделах, в модели клиент/сервер, клиент может загружать данные на сервер и с сервера, если оба устройства используют протокол передачи файлов (File Transfer Protocol, FTP). Как и HTTP, электронная почта и протоколы адресации, FTP — широко используемый протокол прикладного уровня. В этом разделе более подробно рассматривается FTP.

Протокол FTP разработали, чтобы передавать данные между клиентом и сервером. FTP-клиент представляет собой приложение, запущенное на компьютере, которое используется для получения или отправки данных на сервер, где функционирует служба FTP.

![](./assets/15.5.1.svg)


С помощью команд, отправленных через управляющее соединение, данные можно загрузить с сервера или отправить на него с клиентского компьютера.

Клиент устанавливает первое подключение к серверу для контроля трафика через TCP-порт 21. Трафик состоит из команд клиента и ответов сервера.

Затем клиент устанавливает второе соединение с сервером для непосредственной передачи данных через порт 20 протокола TCP. Это подключение создается для каждой передачи данных.

Данные могут передаваться в любом направлении. Клиент может загрузить (принять) данные с сервера или выгрузить (послать) данные на сервер.

<!-- 15.5.2 -->
## Протокол SMB

Протокол обмена блоками серверных сообщений (Server Message Block, SMB) — это протокол обмена файлами между клиентом и сервером, описывающий структуру общих ресурсов сети: каталогов, файлов, принтеров и последовательных портов. Это протокол типа «запрос-ответ». Все сообщения SMB в общем формате, который использует фиксированную длину заголовка. После заголовка следует параметр переменного размера и компонент данных.

Функции сообщений SMB:

* запуск, аутентификация и завершение сеансов;
* доступ к файлам и принтерам;
* разрешение на отправить или принять сообщения с приложения на другое устройство.

Отличительная особенность сетей Microsoft — общий доступ к файлам и сервисам печати на основе SMB. Начиная с Windows 2000, компания Microsoft изменила базовую архитектуру с использованием протокола SMB. В предыдущих версиях продуктов Microsoft в сервисах SMB для разрешения имен использовался протокол, отличный от TCP/IP. Начиная с версии Windows 2000, во всех последующих продуктах Microsoft используется система доменных имен DNS, которая позволяет протоколам TCP/IP напрямую поддерживать общие ресурсы SMB, как показано на рисунке.

![](./assets/15.5.2-1.svg)


SMB — это протокол типа «запрос-ответ» для обмена данными между клиентом и сервером. Серверы могут предоставлять свои ресурсы клиентам в сети.

На рисунке показан процесс обмена файлами по SMB между компьютерами с операционной системой Windows.

![](./assets/15.5.2-2.svg)


Файл можно скопировать с одного ПК на другой по протоколу SMB, используя проводник Windows Explorer.

В отличие от обмена файлами по протоколу FTP, клиенты устанавливают долговременное подключение к серверам. После установки соединения пользователь может получить доступ к ресурсам на сервере аналогично доступу к ресурсам на локальном хосте.

Операционные системы LINUX и UNIX также позволяют открывать общий доступ к ресурсам в сетях Microsoft, используя версию SMB под названием SAMBA. Операционные системы Apple Macintosh также поддерживают работу с общими ресурсами по протоколу SMB.

<!-- 15.5.3 -->
<!-- quiz -->

