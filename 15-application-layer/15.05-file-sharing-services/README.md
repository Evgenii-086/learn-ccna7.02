<!-- verified: agorbachev 03.05.2022 -->

<!-- 15.5.1 -->
## Протокол FTP

Как вы узнали в предыдущих разделах, в модели клиент/сервер, клиент может загружать данные на сервер и загружать данные с сервера, если оба устройства используют протокол передачи файлов (File Transfer Protocol, FTP). Как и HTTP, электронная почта и протоколы адресации, FTP является широко используемым протоколом прикладного уровня. В этом разделе более подробно рассматривается FTP.

Протокол FTP был разработан для передачи данных между клиентом и сервером. FTP-клиент представляет собой приложение, запущенное на компьютере, которое используется для получения данных с сервера, на котором функционирует служба FTP, или отправки данных на этот сервер.

![](./assets/15.5.1.png)


С помощью команд, отправленных через управляющее соединение, данные можно загрузить с сервера или отправить на сервер с клиентского компьютера.

Клиент устанавливает первое подключение к серверу для контроля трафика через TCP-порт 21. Трафик состоит из команд клиента и ответов сервера.

Затем клиент устанавливает второе соединение с сервером для непосредственной передачи данных через порт 20 протокола TCP. Это подключение создается для каждой передачи данных.

Данные могут передаваться в любом направлении. Клиент может загрузить (принять) данные с сервера или выгрузить (послать) данные на сервер.

<!-- 15.5.2 -->
## Протокол SMB

Протокол обмена блоками серверных сообщений (Server Message Block, SMB) — это протокол обмена файлами между клиентом и сервером, описывающий структуру общих ресурсов сети, таких как каталоги, файлы, принтеры и последовательные порты. Это протокол типа «запрос-ответ». Все сообщения SMB имеют общий формат. В этом формате используется фиксированная длина заголовка, после которого следует параметр переменного размера и компонент данных.

Ниже приведены три функции сообщений SMB:

* Осуществлять запуск, аутентификацию и завершение сеансов.
* Управлять доступом к файлам и принтерам.
* Разрешать приложению отправлять сообщения на другое устройство и принимать их.

Общий доступ к файлам и сервисам печати на основе SMB является отличительной особенностью сетей Microsoft. Начиная с серии систем Windows 2000, компания Microsoft изменила базовую архитектуру с использованием протокола SMB. В предыдущих версиях продуктов Microsoft в сервисах SMB для разрешения имен использовался протокол, отличный от TCP/IP. Начиная с версии Windows 2000, во всех последующих продуктах Microsoft используется система доменных имен DNS, которая позволяет протоколам TCP/IP напрямую поддерживать общие ресурсы SMB, как показано на рисунке.

![](./assets/15.5.2-1.png)


SMB - это протокол типа «запрос-ответ» для обмена данными между клиентом и сервером. Серверы могут предоставлять свои ресурсы клиентам в сети.

На следующем рисунке показан процесс обмена файлами по SMB между компьютерами с операционной системой Windows.

![](./assets/15.5.2-2.png)


Файл можно скопировать с одного ПК на другой по протоколу SMB, используя проводник Windows Explorer.

В отличие от обмена файлами по протоколу FTP, клиенты устанавливают долговременное подключение к серверам. После установки соединения пользователь может получить доступ к ресурсам на сервере аналогично доступу к ресурсам на локальном хосте.

Операционные системы LINUX и UNIX также позволяют открывать общий доступ к ресурсам в сетях Microsoft, используя версию SMB под названием SAMBA. Операционные системы Apple Macintosh также поддерживают работу с общими ресурсами по протоколу SMB.

<!-- 15.5.3 -->
<!-- quiz -->

