<!-- verified: agorbachev 03.05.2022 -->

<!-- 15.6.1 -->
## Уровень приложения, уровень представления, сеансовый уровень

В моделях OSI и TCP/IP прикладной уровень ближе всего к конечному пользователю. Его протоколы используют для обмена данными между программами на узлах источника и назначения. 

Функции уровня представления: форматировать или представлять данные на устройстве-источнике в совместимую форму для приема адресатом, сжимать данные так, чтобы устройство-адресат их распаковало, шифровать данные для передачи и дешифровать их при получении. 

На сеансовом уровне приложения на узле источника и узле назначения создают и поддерживают сеансы связи. На этом уровне происходит обмен данными для установления связи, поддержания ее в активном состоянии и для перезапуска сеансов, которые были прерваны или неактивны в течение продолжительного времени. 

Протоколы уровня приложений TCP/IP определяют форматы и управляют данными, необходимыми для многих распространенных функций обмена через Интернет. Эти протоколы использует как источник, так и устройство назначения во время сеанса. Протоколы, реализованные на хосте источника и адресата, должны быть совместимы.

## Одноранговые сети

В модели типа «клиент-сервер» устройство, запрашивающее информацию, называется клиентом, а устройство, которое отвечает на запрос, — сервером. Клиент начинает обмен данными, отправляя запрос на получение данных с сервера, который в ответ отправляет один или несколько потоков данных клиенту. 

В P2P-сети два (или более) компьютера подключаются между собой по сети и могут открывать доступ к своим ресурсам без выделенного сервера. Каждое подключенное к сети конечное устройство (одноранговый узел) может выполнять функции сервера и клиента. 

Компьютер может быть сервером для одной операции, одновременно выступая в роли клиента для других операций. Для P2P-приложений требуется, чтобы каждое конечное устройство предоставляло пользовательский интерфейс и запускало сервис в фоновом режиме. В некоторых P2P-приложениях используется гибридная система, где общий доступ к ресурсам децентрализован, а индексы местоположений ресурсов хранятся в центральном каталоге. 

Многие P2P-приложения позволяют пользователям одновременно использовать части множества файлов. Для поиска других пользователей, располагающих необходимыми частями файлов, клиенты используют небольшие торрент-файлы, которые позволяют напрямую устанавить подключение к этим пользователям. В файле записана информация о трекере, на котором хранятся данные о частях файлов, которыми располагают пользователи.

## Веб-службы и сервисы электронной почты

Когда веб-адрес или URL вводится в браузере, он устанавливает соединение с веб-службой. Она выполняется на сервере, использующем HTTP. Этот протокол основан на механизме «запрос-ответ». Когда клиент (обычно браузер) отправляет запрос веб-серверу, протокол HTTP определяет, какие для этого взаимодействия нужны типы сообщений: GET, POST или PUT. Для безопасной связи через Интернет в HTTPS используется тот же процесс, что и в HTTP, но поток данных шифруется посредством SSL (Secure Socket Layer) перед передачей по сети. 

Электронная почта поддерживает три протокола для работы: SMTP, POP и IMAP. В процессе уровня приложений, на котором выполняется отправка почты, используют протокол SMTP. Клиент получает электронную почту с помощью POP или IMAP. В формате SMTP сообщение состоит из заголовка и тела сообщения. Тело сообщения может содержать текст произвольной длины. В заголовке адреса электронной почты получателя и отправителя должны быть указаны в соответствующем формате. С помощью протокола POP приложения получают сообщения от сервера электронной почты. При использовании POP клиент загружет сообщения с сервера, откуда они удаляются. В отличии от POP, что при подключении пользователя к серверу IMAP в клиентское приложение загружаются только копии сообщений. Исходники остаются на сервере, пока их не удалят вручную.

## Сервисы разрешения доменных имен и автоматической конфигурации узлов

Протокол DNS сопоставляет имена ресурсов с соответствующим числовым сетевым адресом. При обмене данными по протоколу DNS используется формат сообщений для всех типов запросов клиента и ответов сервера, сообщений об ошибках и передачи записей ресурсов между серверами. Иерархическая структура DNS строится по именам доменов. У каждого DNS-сервера есть отдельная база данных. Сервер управляет привязкой имен к IP-адресам только в отдельной небольшой части общей структуры DNS. Компьютерные ОС используют Nslookup, чтобы пользователь вручную мог запрашивать серверы имен для разрешения заданного имени хоста. 

Служба DHCP для IPv4 автоматизирует назначение адресов IPv4, масок подсети, шлюза и других параметров сети IPv4. DHCPv6 предоставляет аналогичные службы для клиентов IPv6, но не предоставляет адрес шлюза по умолчанию. Когда устройство IPv4, на котором настроено использование DHCP, загружается или подключается к сети, клиент выполняет широковещательную рассылку сообщения обнаружения DHCP (DHCPDISCOVER), чтобы идентифицировать все доступные сервера DHCP в сети. Сервер DHCP отвечает сообщением с предложением DHCP (DHCPOFFER), которое разрешает клиенту арендовать адрес. DHCPv6 имеет набор сообщений, аналогичных сообщениям для DHCPv4: SOLICIT, ADVERTISE, INFORMATION REQUEST и REPLY.

## Сервисы совместного доступа к файлам

FTP-клиент — приложение на компьютере, которое используют для получения или отправки данных на сервер, на котором функционирует служба FTP. Клиент устанавливает первое подключение к серверу для контроля трафика через TCP-порт 21. Затем клиент устанавливает второе соединение с сервером для непосредственной передачи данных через порт 20 протокола TCP. Клиент может загрузить (принять) данные с сервера или выгрузить (послать) данные на сервер. 

Существует три функции сообщений SMB, они используются для начала, аутентификации и завершения сеансов, контроля доступа к файлам и принтерам и разрешения приложению отправлять или получать сообщения от другого устройства. В отличие от обмена файлами по протоколу FTP, клиенты устанавливают долговременное подключение к серверам. После установки соединения пользователь может получить доступ к ресурсам на сервере аналогично доступу к ресурсам на локальном узле.

<!-- 15.6.2 -->
<!-- quiz -->

