
---

> **ВАЖНО**
> 
> Форма для ответов на вопросы будет доступна только при развертывании лабораторной работы 

---

## Топология

![topology](./assets/17.4.6-1.png)

## Задачи

**Часть 1. Регистрация задержки сети с помощью команды ping**

**Часть 2. Регистрация задержки сети с помощью команды traceroute**

## Общие сведения/сценарий

Для получения достоверной информации о задержке сети это задание необходимо выполнять в рабочей сети. Вместе с инструктором проверьте, существуют ли ограничения на использование **ping**-запроса в локальной сети.

Цель этой лабораторной работы — измерить и оценить задержку сети за определенное время и составить наглядные примеры типовой активности сети в различное время суток. Для этого вы проанализируете задержку ответа на **ping**-запрос удаленного компьютера. Используя время задержки эхо-ответа в миллисекундах, вычислите среднюю задержку и диапазон (минимальное и максимальное значения) продолжительности задержки.

## Необходимые ресурсы

-   Один ПК с доступом к Интернету.

## Инструкции

### Часть 1. Регистрация задержки сети с помощью команды ping

В первой части вам нужно вычислить задержку сети при обращении к нескольким веб-сайтам, расположенным в разных странах. Эту процедуру можно использовать в корпоративной сети предприятия для определения базового уровня производительности.

**Шаг 1. Проверьте подключение.**

Для проверки подключения отправьте следующие эхо-запросы с помощью команды `ping` на веб-сайты регионального интернет-регистратора (Regional Internet Registry, RIR):

```
> ping www.lacnic.net
> ping www.afrinic.net
> ping www.apnic.net
```

**Примечание**. Поскольку www.ripe.net и www.arin.net не отвечают на запросы ICMP, их нельзя использовать в этой лабораторной работе.

**Примечание**. Если для веб-сайтов разрешены IPv6-адреса, то при необходимости для перевода в IPv4-адрес можно использовать опцию -4. Для этого введите команду `ping -4 www.arin.net`.

![2](./assets/17.4.6-2.png)

**Шаг 2. Выполните сбор сетевых данных.**

Вам необходимо собрать достаточное количество данных для подсчета статистики применения команды `ping`, отправив по 25 эхо-запросов на каждый адрес, указанный в шаге 1. Этот шаг может потребовать административных прав, в зависимости от операционной системы. Сохраните результаты по всем веб-сайтам в текстовые файлы.

1.  В окне командной строки введите ping для получения списка доступных параметров.

```
> ping
```

1.  Используя команду `ping` с функцией подсчета, отправьте 25 эхо-запросов на узел назначения, как показано ниже. При этом в текущем каталоге будет создан текстовый файл с именем arin.txt. Этот текстовый файл будет содержать результаты эхо-запросов с помощью команды ping.

```
> ping –n 25 www.lacnic.net > lacnic.txt
```

**Примечание.** Поле терминала остается пустым до полного выполнения команды, так как ее результаты перенаправляются в текстовый файл **lacnic.txt**, (в данном примере). Символ **\>** используется для перенаправления вводимых на экране данных в текстовый файл и перезаписи этого файла, если он уже существует. Если в файл необходимо сохранить несколько результатов, в строке команды замените **\>** на **\>\>**.

1.  Выполните команду `ping` для остальных веб-сайтов.

```
> ping –n 25 www.afrinic.net > afrinic.txt
> ping –n 25 www.apnic.net > apnic.txt
```

**Шаг 3. Проверьте собранные данные.**

Чтобы проверить, созданы ли необходимые файлы, введите команду **dir** (или **ls -l**, если вы работаете в **Linux**), которая выводит на экран список всех файлов в каталоге. Чтобы отобразить только текстовые файлы, можно использовать подстановочный знак \*.

```
C:\Users\User1> dir *.txt
Volume in drive C is OS
 Volume Serial Number is 0A97-D265

 Directory of C:\Users\User1

02/07/2013 01:00 PM 1,615 apnic.txt
02/07/2013 01:00 PM 1,615 apnic.txt
02/07/2013 12:58 PM 1,589 lacnic.txt
```

Для просмотра результатов, сохраненных в созданном файле, в окне командной строки введите `more`.

```
> more lacnic.txtt
```

**Примечание**. Нажмите клавишу пробела, чтобы отобразить остальную часть файла, или клавишу q, чтобы выйти.

Внесите полученные результаты в соответствующие поля для ответов:

1.  [www.afrinic.net](http://www.afrinic.net)

    - ответьте на вопрос №1

    - ответьте на вопрос №2

    - ответьте на вопрос №3

2.  [www.apnic.net](http://www.apnic.net)

    - ответьте на вопрос №4

    - ответьте на вопрос №5

    - ответьте на вопрос №6

3.  [www.lacnic.net](http://www.lacnic.net)

    - ответьте на вопрос №7

    - ответьте на вопрос №8

    - ответьте на вопрос №9

Вопрос:

- ответьте на вопрос №10

### Часть 2. Регистрация задержки сети с помощью команды traceroute

В зависимости от зоны охвата вашего интернет-провайдера и расположения узлов источника и назначения отслеживаемые маршруты могут пересекать множество переходов и сетей. Для определения задержки сети можно также использовать команды `traceroute`. В части 2 команда `tracert `применяется для отслеживания пути к тем же узлам назначения, что и в части 1. **Tracert** — версия команды `traceroute` для Windows.

Для трассировки маршрута команда `tracert` использует пакеты с сообщением ICMP TTL Exceed (Время жизни пакета превышено) и эхо-ответы ICMP.

**Шаг 1. Используйте команду** `tracert` **(**`traceroute`**, если вы используете Linux) и сохраните полученные результаты в текстовые файлы.**

Скопируйте следующие команды, чтобы создать файлы трассировки маршрута:

```
> tracert www.lacnic.net > traceroute_lacnic.txt
> tracert www.afrinic.net > traceroute_afrinic.txt
> tracert www.apnic.net > traceroute_apnic.txt
```

**Примечание**. Если для веб-сайтов разрешены IPv6-адреса, то при необходимости для перевода в IPv4-адрес можно использовать опцию `-4`. Введите команду `tracert -4 www.lacnic.net > traceroute_lacnic.txt`.

**Шаг 2. Введите команду more, чтобы проверить отслеженный путь.**

1.  Введите команду `more`, чтобы просмотреть содержимое этих файлов:

```
> more traceroute_arin.txt
```

В этом примере получение ответа от шлюза по умолчанию (192.168.0.1) заняло менее 1 мс. В строке счетчика переходов 6 указано, что путь к узлу 4.28.58.177 и обратно занял в среднем 37 мс. Путь к конечному узлу www.lacnic.net и обратно занял в среднем 225 мс.

Между строками 8 и 9 наблюдается большая задержка в сети, о чем свидетельствует увеличение времени прохождения сигнала туда и обратно со среднего значения с 78 мс до 298 мс

2.  Аналогичным образом проанализируйте остальные результаты применения команды `tracert`.

Вопрос:

- ответьте на вопрос №11

### Часть 3. Расширенная команда traceroute

Хотя реализация команды `traceroute` зависит от платформы, все версии позволяют пользователю отрегулировать поведение этой команды. В Windows это можно сделать, задавая параметры в командной строке `tracert`.

1.  Обратное разрешение имен (получение имени домена по IP-адресу) может приводить к задержкам в получении результатов `tracert` и к неточности результатов. Чтобы команда tracert не пыталась выполнить обратное разрешение IP-адресов переходов, укажите параметр `–d` в командной строке `tracert`:

```
> tracert –d www.lacnic.net > traceroute_d_lacnic.txt
> tracert –d www.afrinic.net > traceroute_d_afrinic.txt
> tracert –d www.apnic.net > traceroute_d_apnic.txt
```

2.  Введите команду `more`, чтобы просмотреть содержимое этих файлов:

```
> more traceroute_d_lacnic.txt
```

- ответьте на вопрос №12

**Примечание.** В Windows команда `tracert`, введенная без параметров, отображает список доступных параметров и их описания.

**Примечание.** Реализация команды `traceroute` в Cisco IOS также позволяет выполнять настройку, но без использования параметров командной строки. Расширенная команда `traceroute` в Cisco IOS задает ряд простых вопросов, позволяющих администратору ввести значения нужных параметров.

## Вопросы для повторения

- ответьте на вопрос №13

- ответьте на вопрос №14