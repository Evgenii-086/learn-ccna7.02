#  Практика и контрольная работа модуля

<!-- 9.4.1 -->
##  Что я изучил в этом модуле?

**MAC и IP**

Они используются для доставки кадра, передаваемого по каналу в инкапсулированном IP-пакете, от одной сетевой интерфейсной платы к другой в той же сети. Если IP-адрес назначения находится в той же сети, то MAC-адресом назначения является адрес устройства назначения. Если IP-адрес назначения находится в удаленной сети, то MAC-адресом назначения является адрес шлюза хоста по умолчанию. В каждом канале на пути IP-пакет инкапсулируется в кадр. Кадр связан с конкретной технологии канала передачи данных, связанной с этим каналом, например Ethernet. Если следующее транзитное устройство является назначением, то MAC-адресом назначения будет адрес сетевой платы Ethernet этого устройства. Каким образом IP-адреса IP-пакетов в потоке данных ассоциируются с MAC-адресами в каждом канале на пути к узлу назначения? Для пакетов IPv4 это делается через процесс под названием ARP. Для пакетов IPv6 этим процессом является обнаружение соседей ICMPv6 (ND).

**ARP**

Каждое IP-устройство в сети Ethernet имеет уникальный MAC-адрес Ethernet. Когда устройство отправляет кадр Ethernet, он содержит два адреса: MAC-адрес назначения и MAC-адрес источника. Устройство использует ARP для определения MAC-адреса назначения локального устройства, когда оно знает  IPv4 адрес. ARP предоставляет две основные функции: разрешение IPv4 адресов для MAC-адресов и ведение таблицы сопоставлений IPv4 для MAC-адресов. Запрос ARP инкапсулируется во фрейм Ethernet, используя эту информацию заголовка: MAC-адреса источника и назначения и тип. Только у одного устройства в локальной сети (LAN) будет IPv4-адрес, совпадающий в целевым IPv4-адресом в ARP-запросе. Ответ от других устройств не поступает. Ответ ARP содержит те же поля заголовка, что и запрос. Одноадресный ARP-ответ получит только то устройство, которое отправило ARP-запрос. После получения ARP-ответа устройство добавит адрес IPv4 и соответствующий MAC-адрес в свою таблицу ARP. Если IPv4-адрес назначения находится не в той же сети, что IPv4-адрес источника, устройству-отправителю необходимо отправить кадр на свой шлюз по умолчанию. Это интерфейс локального маршрутизатора В каждом устройстве есть таймер кеша ARP, который удаляет записи из таблицы ARP, не используемые в течение указанного периода времени. Кроме того, можно использовать некоторые команды, чтобы вручную удалить все или некоторые записи из таблицы ARP. Поскольку ARP-запрос является кадром широковещательной рассылки, его получают и обрабатывают все устройства в локальной сети. Злоумышленник может использовать ARP spoofing для выполнения атаки «отравление» ARP-кеша.

**Обнаружение соседних устройств**

IPv6 не использует ARP, он использует протокол ND для разрешения MAC-адресов. ND обеспечивает разрешение адресов, обнаружение маршрутизаторов и службы перенаправления для IPv6 с использованием ICMPv6. ICMPv6 ND использует пять сообщений ICMPv6 для выполнения этих служб: «Запрос соседнего узла», «Ответ соседнего узла», «Запрос к маршрутизатору», «Ответ маршрутизатора» и перенаправление. Подобно ARP для IPv4, IPv6 устройства используют IPv6 ND для разрешения MAC-адреса устройства на известный IPv6 адрес.

<!-- 9.4.2 -->
<!-- quiz -->

