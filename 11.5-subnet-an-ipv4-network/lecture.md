<!-- verified: agorbachev 03.05.2022 -->

<!-- 11.5.1 -->
## Разделение на подсети на границе октетов

В предыдущей теме вы узнали несколько веских причин для сегментации сети. Вы также узнали, что сегментирование сети называется разделение на подсети. Разделение на подсети — это критически важный навык, который необходимо иметь при администрировании сети IPv4. Сначала это немного сложно, но это становится намного проще с практикой.

Для создания IPv4-подсетей мы задействуем один или несколько бит из узловой части в качестве бит сетевой части. Для этого мы расширяем маску подсети. Мы заимствуем биты из узловой части адреса и создаем дополнительные биты для сети. Чем больше заимствовано бит из узловой части, тем больше подсетей можно создать. Чем больше бит, заимствованных для увеличения числа подсетей, тем меньше количество узлов в подсети.

Разделение сетей проще всего выполнить на границах октетов /8, /16 и /24. В таблице указаны эти длины префикса. Обратите внимание, что увеличение длины префикса сокращает число узлов в каждой подсети.

*Маски подсетей на границах октетов*

| **Длина префикса** | **Маска подсети** | **Маска подсети в двоичной системе (n = сеть, h = хост)** | **# хостов** |
| --- | --- | --- | --- |
| **/8** | **255**.0.0.0 | `nnnnnnnn.hhhhhhhh.hhhhhhhh.hhhhhhhh `<br>`11111111.00000000.00000000.00000000` | 16 777 214 |
| **/16** | **255.255**.0.0 | `nnnnnnnn.nnnnnnnn.hhhhhhhh.hhhhhhhh `<br>`11111111.11111111.00000000.00000000` | 65 534 |
| **/24** | **255.255.255**.0 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.hhhhhhhh `<br>`11111111.11111111.11111111.00000000` | 254 |

Рассмотрим следующий пример, чтобы понять как использовать границы октетов для разделения на подсети. Допустим, предприятие выбрало частный адрес 10.0.0.0/8 в качестве адреса внутренней сети. Этот сетевой адрес может связать 16 777 214 узлов в один широковещательный домен. Очевидно, что наличие более 16 миллионов узлов в одной подсети не идеально.

Предприятие может дальше разбить адрес 10.0.0.0/8 на подсети на границе октета /16, как показано в таблице. Это даст возможность предприятию определить 256 подсетей (то есть 10.0.0.0/16 – 10.255.0.0/16), каждая из которых сможет связать 65 534 узла. Обратите внимание, что первые два октета идентифицируют адрес сетевой части, тогда как последние два октета определяют IP-адрес узла.

*Разделение сети 10.0.0.0/8 с использованием маски /16*

| **Адрес подсети<br>(256 возможных подсетей)** | **Диапазон хостов<br>(65 534 возможных узла в каждой подсети)** | **Широковещательный адрес** |
| --- | --- | --- |
| **10.0**.0.0/**16** | **10.0**.0.1 - **10.0**.255.254 | **10.0**.255.255 |
| **10.1**.0.0/**16** | **10.1**.0.1 - **10.1**.255.254 | **10.1**.255.255 |
| **10.2**.0.0/**16** | **10.2**.0.1 - **10.2**.255.254 | **10.2**.255.255 |
| **10.3**.0.0/**16** | **10.3**.0.1 - **10.3**.255.254 | **10.3**.255.255 |
| **10.4**.0.0/**16** | **10.4**.0.1 - **10.4**.255.254 | **10.4**.255.255 |
| **10.5**.0.0/**16** | **10.5**.0.1 - **10.5**.255.254 | **10.5**.255.255 |
| **10.6**.0.0/**16** | **10.6**.0.1 - **10.6**.255.254 | **10.6**.255.255 |
| **10.7**.0.0/**16** | **10.7**.0.1 - **10.7**.255.254 | **10.7**.255.255 |
| ... | ... | ... |
| **10.255**.0.0/**16** | **10.255**.0.1 - **10.255**.255.254 | **10.255**.255.255 |

Кроме того, предприятие может выбрать подсеть сети 10.0.0.0/8 на границе октета /24, как показано в таблице. Это даст возможность предприятию определить 65536 подсетей, каждая из которых сможет связать 254 узла. Граница октета /24 очень популярна при разделении на подсети, потому что она позволяет разместить рациональное число узлов и формирует удобные для использования подсети на границе октета.

*Разделение сети 10.0.0.0/8 с использованием маски /24*

| **Адрес подсети<br>(65,536 возможных подсетей)** | **Диапазон хостов<br>(254 возможных хоста в подсети)** | **Широковещательный адрес** |
| --- | --- | --- |
| **10.0.0**.0/**24** | **10.0.0**.1 - **10.0.0**.254 | **10.0.0**.255 |
| **10.0.1**.0/**24** | **10.0.1**.1 - **10.0.1**.254 | **10.0.1**.255 |
| **10.0.2**.0/**24** | **10.0.2**.1 - **10.0.2**.254 | **10.0.2**.255 |
| ... | ... | ... |
| **10.0.255**.0/**24** | **10.0.255**.1 - **10.0.255**.254 | **10.0.255**.255 |
| **10.1.0**.0/**24** | **10.1.0**.1 - **10.1.0**.254 | **10.1.0**.255 |
| **10.1.1**.0/**24** | **10.1.1**.1 - **10.1.1**.254 | **10.1.1**.255 |
| **10.1.2**.0/**24** | **10.1.2**.1 - **10.1.2**.254 | **10.1.2**.255 |
| ... | ... | ... |
| **10.100.0**.0/**24** | **10.100.0**.1 - **10.100.0**.254 | **10.100.0**.255 |
| ... | ... | ... |
| **10.255.255**.0/**24** | **10.255.255**.1 - **10.255.255**.254 | **10.255.255**.255 |

<!-- 11.5.2 -->
## Подсеть в пределах октета

В ранее приведенных примерах мы использовали биты узлов из общих префиксов сети /8, /16 и /24. Однако подсеть может заимствовать биты из любой позиции бит в узловой части для создания других масок.

Например, адрес сети /24 обычно разбивается на подсети с помощью более длинных префиксов, заимствуя биты из четвертого октета. Благодаря этому администратор может гибко назначать сетевые адреса меньшему числу оконечных устройств.

*Разделение сети /24 на подсети*

| **Длина префикса** | **Маска подсети** | **Маска подсети в двоичном формате<br>(n = сеть; h = узел)** | **# Количество подсетей** | **# Количество хостов** |
| --- | --- | --- | --- | --- |
| /25 | 255.255.255.128 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.nhhhhhhh`<br>`11111111.11111111.11111111.10000000` | **2** | 126 |
| /26 | 255.255.255.192 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.nnhhhhhh`<br>`11111111.11111111.11111111.11000000` | **4** | 62 |
| /27 | 255.255.255.224 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnhhhhh`<br>`11111111.11111111.11111111.11100000` | **8** | 30 |
| /28 | 255.255.255.240 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnhhhh`<br>`11111111.11111111.11111111.11110000` | **16** | 14 |
| /29 | 255.255.255.248 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnnhhh`<br>`11111111.11111111.11111111.11111000` | **32** | 6 |
| /30 | 255.255.255.252 | `nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnnnhh`<br>`11111111.11111111.11111111.11111100` | **64** | 2 |

Для каждого бита, заимствованного в четвертом октете, доступное количество подсетей удваивается с сокращением числа адресов узлов на подсеть.

* **Префикс /25** — заимствование 1 бита из четвертого октета формирует 2 подсети с поддержкой 126 узлов в каждой
* **Префикс /26** — заимствование 2 бит формирует 4 подсети с поддержкой 62 узлов в каждой
* **Префикс /27** — заимствование 3 бит формирует 8 подсетей с поддержкой 30 узлов в каждой
* **Префикс /28** — заимствование 4 бит формирует 16 подсетей с поддержкой 14 узлов в каждой
* **Префикс /29** — заимствование 5 бит формирует 32 подсети с поддержкой 6 узлов в каждой
* **Префикс /30** — заимствование 6 бит формирует 64 подсети с поддержкой 2 узлов в каждой

<!-- 11.5.3 -->
## Видео: разделение на подсети

Посмотрите видео о маске подсети и о разделении на подсети с помощью «магического числа».

<iframe width="970" height="546" src="https://www.youtube.com/embed/LKjCyGaiH4Q" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<!-- 11.5.4 
## Видео: разделение на подсети с помощью «магического числа»

Нажмите кнопку «Воспроизведение», чтобы посмотреть видеоролик о «магическом числе».
-->

<iframe width="970" height="546" src="https://www.youtube.com/embed/A2P7i6ebSCE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<!-- 11.5.5 -->
## Работа в симуляторе: Разделение IPv4-сети на подсети

В этом задании  вам нужно будет разделить сеть, начиная с адреса и маски сети, на несколько подсетей. При создании схемы подсети необходимо учитывать количество компьютеров каждой подсети и другие аспекты, например дальнейшее расширение узлов в сети.

После того как вы составите схему разделения на подсети и диаграмму сети и укажите IP-адреса узлов и интерфейсов, вам нужно будет настроить компьютеры и интерфейсы маршрутизаторов и коммутаторов.

После того как сетевые устройства и компьютеры будут настроены, вы проверите сетевые подключения с помощью команды **ping**.

[Разделение  IPv4-сети  на подсети (pdf)](./assets/11.5.5-packet-tracer---subnet-an-ipv4-network.pdf)

[Разделение  IPv4-сети  на подсети (pka)](./assets/11.5.5-packet-tracer---subnet-an-ipv4-network.pka)

