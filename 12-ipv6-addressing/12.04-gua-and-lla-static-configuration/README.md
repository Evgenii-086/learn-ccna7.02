<!-- verified: agorbachev 03.05.2022 -->

<!-- 12.4.1 -->
## Статическая настройка GUA на маршрутизаторе

Как вы узнали в предыдущем разделе, GUAs IPv6 аналогичны публичным адресам IPv4. Глобальные индивидуальные IPv6-адреса (GUA) уникальны по всему миру и доступны для маршрутизации через Интернет IPv6. IPv6 LLA позволяет двум устройствам с поддержкой IPv6 взаимодействовать друг с другом по одному каналу (подсети). Статически настроить GUA и LLA IPv6 на маршрутизаторах несложно, что поможет вам создать сеть IPv6. В этой теме вы узнаете, как это сделать.

Большинство команд настройки и проверки IPv6-сети в операционной системе Cisco IOS похожи на свои аналоги для IPv4-сети. Чаще всего единственная разница заключается в использовании ipv6 вместо ip в командах.

Например, команда Cisco IOS для настройки адреса IPv4 на интерфейсе — это **ip address** _ip-address subnet-mask_. Напротив, команда для настройки GUA IPv6 на интерфейсе — **ipv6 address** _ipv6-address/prefix-length_.

Обратите внимание на отсутствие пробела между ipv6-address и prefix-length.

Для примера настройки используется топология, показанная на рис. 1, и следующие IPv6-подсети:

* 2001:db8:acad:1:/64
* 2001:db8:acad:2:/64
* 2001:db8:acad:3:/64

![](./assets/12.4.1.svg)


Как показано на рисунке, для настройки индивидуального глобального IPv6-адреса в интерфейсах GigabitEthernet 0/0/0, GigabitEthernet 0/0/1 и Serial 0/1/0 маршрутизатора R1 используются следующие команды:

**Пример конфигурации на маршрутизаторе R1**

```
R1(config)# interface gigabitethernet 0/0/0 
R1(config-if)# ipv6 address 2001:db8:acad:1::1/64
R1(config-if)# no shutdown
R1(config-if)# exit
R1(config)# interface gigabitethernet 0/0/1 
R1(config-if)# ipv6 address 2001:db8:acad:2::1/64
R1(config-if)# no shutdown
R1(config-if)# exit
R1(config)# interface serial 0/1/0 
R1(config-if)# ipv6 address 2001:db8:acad:3::1/64
R1(config-if)# no shutdown
```

<!-- 12.4.2 -->
## Статическая конфигурация GUA IPv6-адреса на узле Windows

Ручная настройка IPv6-адреса на узле аналогична настройке IPv4-адреса. 

Как показано на рисунке, адрес шлюза по умолчанию, настроенный на компьютере PC1, — это 2001:DB8:ACAD:1::1. Это глобальный индивидуальный адрес интерфейса маршрутизатора R1 GigabitEthernet в той же сети. Кроме того, адрес шлюза по умолчанию может совпадать с локальным адресом канала интерфейса GigabitEthernet. Рекомендуется использовать локальный IPv6-адрес канала  маршрутизатора в качестве адреса шлюза по умолчанию. Допустим любой из этих вариантов настройки.

![](./assets/12.4.2.png)


Как и в случае с IPv4, настройка статических адресов для клиентов не распространяется на крупные сети. Поэтому большинство сетевых администраторов IPv6-сети назначают IPv6-адреса динамически.

Устройство может автоматически получать глобальный индивидуальный IPv6-адрес двумя способами:

* автоматическая конфигурация адреса без сохранения состояния (Stateless Address Autoconfiguration, SLAAC)
* адресация DHCPv6 с учётом состояний.

SLAAC и DHCPv6 рассматриваются в следующем разделе.

**Примечание**: Если используется DHCPv6 или SLAAC, локальный адрес канала локального маршрутизатора автоматически указывается как адрес шлюза по умолчанию.

<!-- 12.4.3 -->
## Статическая конфигурация LLA

Ручная настройка локального адреса канала позволяет создавать узнаваемый и запоминающийся адрес. Как правило, достаточно создать распознаваемые локальные адреса на маршрутизаторах. Это удобно потому, что локальные адреса маршрутизаторов используются как адреса шлюза по умолчанию и в объявлениях маршрутизации.

LLA можно настроить вручную с помощью **ipv6 address** команды **link-local** _ipv6-link-local-address_. Если адрес начинается с гекстета в диапазоне от FE80 до FEBF, то параметр **link-local** локального канала должен следовать за адресом. На рисунке показан пример топологии с LLA на каждом интерфейсе.

![](./assets/12.4.3.svg)


В примере показана конфигурация LLA на маршрутизаторе R1.

```
R1(config)# interface gigabitethernet 0/0/0 
R1(config-if)# ipv6 address fe80::1:1 link-local
R1(config-if)# exit
R1(config)# interface gigabitethernet 0/0/1 
R1(config-if)# ipv6 address fe80::1:2 link-local
R1(config-if)# exit
R1(config)# interface serial 0/1/0 
R1(config-if)# ipv6 address fe80::1:3 link-local
R1(config-if)# exit
```

Статически настроенные LLA используются, чтобы их было легче распознать как принадлежащие маршрутизатору R1. В этом примере все интерфейсы маршрутизатора R1 настроены с LLA, начинающегося с **fe80::1:**_n_, и уникальной правой цифрой «n». «**1**» представляет маршрутизатор R1.

Следуя тому же синтаксису, что и маршрутизатор R1, если топология включает маршрутизатор R2, у него будут три интерфейса, настроенные с LLAs fe80::2:1, fe80::2:2 и fe80::2:3.

**Примечание**: Точный же LLA может быть настроен для каждого канала, если он уникален для этого канала. Это возможно, потому что локальные интерфейсы канала должны быть уникальными только на данном канале. Тем не менее, распространенная практика заключается в создании различных LLA на каждом интерфейсе маршрутизатора, чтобы упростить идентификацию маршрутизатора и конкретного интерфейса.

<!-- 12.4.4 -->
<!-- syntax -->

