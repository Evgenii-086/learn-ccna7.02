<!-- verified: agorbachev 03.05.2022 -->

<!-- 6.2.1 -->
## Физическая и логическая топология

Вы узнали из предыдущей темы, что канальный уровень подготавливает сетевые данные для физической сети. Он должен знать логическую топологию сети, чтобы иметь возможность определить, что необходимо для передачи кадров с одного устройства на другое. В этом разделе объясняется, как канальный уровень связи данных работает с различными логическими топологиями сети.

Топология сети описывает расположение или взаимосвязь сетевых устройств, а также соединения между ними.

Существует два типа топологий, используемых при описании сетей LAN и WAN:

* **Физическая топология** – Этот термин относится к физическим соединениям и определяет, каким образом соединяются друг с другом оконечные устройства и устройства сетевой инфраструктуры, такие как маршрутизаторы, коммутаторы и точки беспроводного доступа. Топология может также включать определенное местоположение устройства, например номер комнаты и местоположение на стойке оборудования. Физическая топология чаще всего организована по схеме «точка-точка» или «звезда».
* **Логическая топология** – Термин, используемый для описания путей передачи кадров между узлами. Эта топология определяет виртуальные подключения с использованием интерфейсов устройств и схем IP-адресации уровня 3.

При управлении доступом данных к среде канальный уровень «видит» логическую топологию сети. Именно логическая топология влияет на выбор типа кадрирования в сети и управления доступом к среде.

На рисунке отображается образец **физической** топологии для небольшой выборки сети.

### Физическая топология

![](./assets/6.2.1-1.svg)


На следующем рисунке показан пример **логической** топологии для той же сети.

### Логическая топология

![](./assets/6.2.1-2.svg)


<!-- 6.2.2 -->
## Топологии глобальных сетей (WAN)

На рисунках показаны три общие физические топологии WAN.

### Точка-точка (point-to-point)

Это самая простая и распространенная топология WAN. Она представляет собой постоянное соединение между двумя оконечными устройствами.

![](./assets/6.2.2-1.svg)


### Топология типа «звезда»

Версия звездообразной топологии для глобальной сети, в которой центральный узел соединен с периферийными с помощью соединений «точка-точка». Сайты филиалов не могут обмениваться данными с другими сайтами филиалов без прохождения центрального сайта.

![](./assets/6.2.2-2.svg)


### Ячеистая (полносвязная, full-mesh)

Эта топология обеспечивает высокий уровень доступности, но требует, чтобы каждая оконечная система была связана со всеми остальными системами. Поэтому административные и физические расходы могут быть весьма значительными. Каждый канал в такой сети фактически является каналом, связанным с другим узлом соединением «точка-точка».

![](./assets/6.2.2-3.svg)


Гибрид — это вариант или сочетание каких-либо из топологий. Например, частично-ячеистая сеть — это гибридная топология, в которой соединены некоторые, но не все оконечные устройства.

<!-- 6.2.3 -->
## Топология «точка-точка» (point-to-point ) сети WAN

Физические двухточечные топологии напрямую связывают два узла, как показано на рисунке. В такой сети двум узлам не нужно использовать среду совместно с другими узлами. Кроме того, при использовании протокола последовательной связи, такого как протокол «точка-точка»  (PPP), узлу не нужно определять, адресован ли входящий кадр именно ему или же другому узлу. Следовательно, протоколы управления логическими соединениями канального уровня могут быть очень простыми, поскольку все кадры в среде могут передаваться только между двумя узлами. Узел на одном конце помещает кадры в среду, а узел на другом конце двухточечного соединения получает эти кадры из среды.

![](./assets/6.2.3-1.svg)


**Примечание**: Для соединения «точка-точка» через Ethernet требуется, чтобы устройство определило, предназначен ли входящий кадр для этого узла.

Находящиеся на некотором удалении друг от друга узел источника и узел назначения могут соединяться друг с другом не напрямую, используя несколько посреднических устройств. Однако то, как эти физические устройства используются в сети, не влияет на логическую топологию, как показано на рисунке. Добавление промежуточных физических соединений не изменит логическую топологию. Логическое соединение «точка-точка» — это то же самое.

![](./assets/6.2.3-2.svg)


<!-- 6.2.4 -->
## Топологии локальных сетей (LAN)

В сетях с множественным доступом конечные устройства (то есть узлы) связаны с помощью топологий «звезда» или «расширенная звезда», как показано на рисунке.  В топологии этого типа конечные устройства подключаются к центральному промежуточному устройству, в данном случае коммутатору Ethernet. «Расширенная звезда» расширяет эту топологию за счет подключения нескольких коммутаторов Ethernet. Топологию типа «звезда» отличают простой монтаж, высокая масштабируемость (простое добавление и удаление оконечных устройств) и простое устранение неполадок. В ранних топологиях типа «звезда» оконечные устройства соединялись с помощью концентраторов Ethernet.

Иногда в локальной сети Ethernet могут подключаться только два устройства. В качестве примера можно привести два соединенных маршрутизатора. Это будет пример Ethernet, используемого в топологии «точка-точка».

**Устаревшие топологии локальных сетей**

Ранние технологии Ethernet и устаревшие технологии Token Ring LAN включали два других типа топологий:

* **Шина (Bus).**  Все оконечные системы связаны друг с другом общим кабелем, имеющим на концах специальные заглушки («терминаторы»). Для соединения оконечных устройств коммутаторы не требуются. Топологии шины на основе коаксиальных кабелей использовались ранее в сетях Ethernet благодаря своей дешевизне и простому монтажу.
* **Кольцо.**  Каждая оконечная система соединяется с соседней системой, образуя сеть в форме кольца. Кольцо не нужно прерывать, в отличие от топологии шины. Кольцевые топологии использовались в устаревших сетях FDDI (Fiber Distributed Data Interface) и Token Ring.

На рисунке показана организация соединений между оконечными устройствами в локальных сетях. Как правило, при графическом изображении структуры сетей прямыми линиями обозначаются локальные сети Ethernet, включая топологии типа «звезда» и «расширенная звезда».

### Физические топологии

![](./assets/6.2.4.svg)


<!-- 6.2.5 -->
## Полудуплексная и полнодуплексная связь

Понимание дуплексной связи важно при обсуждении топологий локальной сети, поскольку это относится к направлению передачи данных между двумя устройствами. Существует два общих режима дуплекса.

**Полудуплексное соединение**

Оба устройства могут передавать и получать данные в среде, но не одновременно. Полудуплексный режим используется в устаревших шинных топологиях и при использовании концентраторов Ethernet. Полудуплексный режим позволяет осуществлять передачу или прием по общей среде одновременно только одному устройству. Нажмите кнопку «Воспроизведение» на рисунке, чтобы увидеть анимацию, показывающую полудуплексную связь.

![](./assets/6.2.5-1.gif)

**Полнодуплексное соединение**

Оба устройства могут одновременно передавать и принимать в общей среде. Канальный уровень предполагает одновременную доступность среды обоим узлам для передачи. Коммутаторы Ethernet по умолчанию работают в полнодуплексном режиме, но могут работать и в полудуплексе при подключении к таким устройствам, как коммутаторы Ethernet. Нажмите кнопку «Воспроизведение» на рисунке, чтобы увидеть анимацию, показывающую полнодуплексную связь.

![](./assets/6.2.5-2.gif)

Таким образом, полудуплексная связь ограничивает обмен данными в одном направлении за раз. Полнодуплексное соединение поддерживает одновременную отправку и получение данных.

Важно, чтобы два связанных интерфейса, например сетевой интерфейс узла и интерфейс коммутатора Ethernet, использовали один и тот же дуплексный режим. В противном случае будет возникать несоответствие дуплексных режимов, приводящее к снижению эффективности и задержкам в канале связи.

<!-- 6.2.6 -->
## Управления доступом к среде передачи

Примерами таких сетей являются локальные сети Ethernet и беспроводные локальные сети (WLAN). Сеть с множественным доступом — это сеть, которая может иметь два или более конечных устройств, пытающихся получить доступ к сети одновременно.

В некоторых сетях с множественным доступом необходимы правила регулирования доступа устройств к общей физической среде. Существует два основных метода управления доступом к общей среде.

* Конкурентный доступ
* Контролируемый доступ

**Конкурентный доступ** 

В сетях с множественным доступом на основе конкуренции все узлы работают в полудуплексном режиме, конкурируя за использование среды. Одновременно может отправлять данные только одно устройство. Однако существует специальный протокол, определяющий, что должно происходить в случае одновременной передачи обоими устройствами. Примеры методов управления конкурентным доступом к среде передачи

* Множественный доступ с прослушиванием несущей и обнаружением столкновений (Carrier Sense Multiple Access/Collision Detection; CSMA/CD) в стандартных сетях Ethernet с топологией шина.
* Множественный доступ с прослушиванием несущей и обнаружением столкновений применяется в беспроводных LAN

![](./assets/6.2.6-1.svg)


**Контролируемый доступ**

В управляемой сети с множественным конкурентным доступом каждый узел имеет свое время для использования среды. Такие детерминистические типы сетей являются неэффективными из-за того, что устройство должно дожидаться своей очереди для доступа к среде. Примеры сетей с множественным доступом, использующих контролируемый доступ, включают следующие:

* Устаревший Token Ring
* Устаревший ARCNET

![](./assets/6.2.6-2.svg)


Каждый узел должен дождаться своего хода, чтобы получить доступ к сетевой среде.

**Примечание**: Сегодня сети Ethernet работают в полнодуплексном режиме и не требуют метода управления доступом.

<!-- 6.2.7 -->
## Конкурентный доступ — CSMA/CD

Примеры управления конкурентным доступом к среде передачи включают:

* Беспроводная локальная сеть (использует CSMA/CA)
* Устаревшая топология шина Ethernet LAN (использует CSMA/CD)
* Устаревшие сети Ethernet с использованием концентратора (использует CSMA/CD)

Сети WLAN работают в полудуплексном режиме, что означает, что в каждый момент времени передачу или прием может осуществлять только одно устройство. При этом необходим специальный протокол, определяющий, когда устройство может осуществлять передачу, и что происходит в случае одновременной передачи несколькими устройствами.

Если два устройства выполняют передачу одновременно, возникает конфликт. В устаревших локальных сетях Ethernet, сетевой конфликт будет обнаружен обоими устройствами. Это часть обнаружения столкновений (CD) CSMA/CD. Сетевая плата распознает этот конфликт, сравнивая отправленные данные с принятыми или определяя превышение нормальной амплитуды сигнала в среде передачи данных. Данные, передаваемые обоими устройствами, будут повреждены, из-за чего потребуется их повторная отправка.

В PC1 имеется кадр Ethernet, который нужно передать в PC3. Сетевая плата PC1 должна определить, осуществляет ли кто-либо передачу по среде. Если она не обнаруживает сигнал несущей, другими словами, не принимает данные от другого устройства, то делает вывод о том, что сеть свободна для передачи.

Сетевая плата PC1 отправляет Ethernet кадр, когда среда доступна, как показано на рисунке.

![](./assets/6.2.7-1.svg)


Концентратор Ethernet принимает и посылает кадр. Концентратор Ethernet также называют многопортовым ретранслятором. Он осуществляет регенерацию всех битов, принятых на входящем порте, и их рассылку через все остальные порты, как показано на рисунке.

Если другое устройство, например PC2, хочет осуществить передачу, но в данный момент принимает кадр, оно должно дождаться освобождения канала, как показано на рисунке.

![](./assets/6.2.7-2.svg)


Кадр будет доставлен всем устройствам, подключенным к концентратору. Но поскольку в кадре указан адрес целевого канала данных, относящегося к PC3, то только это устройство будет принимать и сохранять весь кадр. Сетевые платы всех остальных устройств игнорируют кадр, как показано на рисунке.

![](./assets/6.2.7-3.svg)


<!-- 6.2.8 -->
## Конкурентный доступ — CSMA/CA

Другим видом доступа CSMA, используемым в беспроводных локальных сетях IEEE 802.11, является множественный доступ с прослушиванием несущей и избежанием столкновений (Carrier Sense Multiple Access/Collision Avoidance; CSMA/CA).

При доступе CMSA/CA для контроля освобождения среды используется метод, аналогичный CSMA/CD. В CMSA/CA также используются дополнительные процедуры. В беспроводных средах устройство может не иметь возможности обнаружить столкновение. CMSA/CA не обнаруживает конфликты, а старается избежать их, ожидая своей очереди для передачи. Каждое передающее устройство включает в передаваемую информацию сведения о времени, необходимом ему для передачи. Все остальные беспроводные устройства принимают эту информацию и знают, как долго среда передачи данных будет занята.

На рисунке, если хост A получает беспроводной кадр от точки доступа, хосты B и C также будут видеть кадр и как долго среда будет недоступна.

![](./assets/6.2.8.svg)


После передачи беспроводным устройством кадра 802.11 получатель возвращает подтверждение, информируя отправителя о доставке кадра.

Независимо от вида сети (будь то локальная сеть Ethernet с концентраторами или беспроводная локальная сеть), системы с конкурентным доступом плохо масштабируются при интенсивном использовании средства подключения.

**Примечание**: В локальных сетях Ethernet с коммутаторами конкурентный доступ не используется, поскольку коммутатор и сетевая интерфейсная плата хоста работают в полнодуплексном режиме.

<!-- 6.2.9 -->
<!-- quiz -->

